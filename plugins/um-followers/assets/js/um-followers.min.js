var e=!1;jQuery(document).ready((function(){function o(e,o){var t="object"==typeof o?jQuery(o.currentTarget).closest("div.um-profile, div.um-member"):jQuery("div.um-profile"),u=t.find(".um-cover[data-user_id], .um-profile-photo[data-user_id], [data-user_id]").first().data("user_id");jQuery.each(e,(function(e,o){u===o.user_id&&("undefined"!==o.followers&&t.find("span.um-ajax-count-followers").text(o.followers),"undefined"!==o.following&&t.find("span.um-ajax-count-following").text(o.following))}))}jQuery(document.body).on("mouseenter",".um-unfollow-btn",(function(){jQuery(this).hasClass("um_followers_ajax")||(jQuery(this).addClass("um-unfollow-btn2"),jQuery(this).html(jQuery(this).attr("data-unfollow")))})),jQuery(document.body).on("mouseleave",".um-unfollow-btn2",(function(){jQuery(this).hasClass("um_followers_ajax")||(jQuery(this).removeClass("um-unfollow-btn2"),jQuery(this).html(jQuery(this).attr("data-following")))})),jQuery(document.body).on("click",".um-follow-btn",(function(t){if(t.preventDefault(),!0===e)return!1;e=!0;var u=jQuery(this);u.parents(".um-members-wrapper").length,u.addClass("um_followers_ajax");var a=u.data("user_id");return wp.ajax.send("um_followers_follow",{data:{user_id:a,nonce:um_scripts.nonce},success:function(a){"object"==typeof a.stats&&o(a.stats,t),u.replaceWith(a.btn),e=!1,bell_enabled+=1,initBellButton()},error:function(o){console.log(o),e=!1}}),!1})),jQuery(document.body).on("click",".um-unfollow-btn",(function(t){if(t.preventDefault(),!0===e)return!1;e=!0;var u=jQuery(this);u.parents(".um-members-wrapper").length,u.addClass("um_followers_ajax");var a=u.data("user_id");return wp.ajax.send("um_followers_unfollow",{data:{user_id:a,nonce:um_scripts.nonce},success:function(a){"object"==typeof a.stats&&o(a.stats,t),u.replaceWith(a.btn),e=!1,bell_enabled-=1,initBellButton()},error:function(o){console.log(o),e=!1}}),!1})),jQuery(document.body).on("click",".um-follow-show-all",(function(e){var o=jQuery(this),t=o.parents(".um-followers-widget"),u=t.data("type"),a=t.data("max"),n=t.data("user_id");t.removeClass("um-is-loaded"),wp.ajax.send("um_followers_get_users",{data:{user_id:n,max:a,offset:a,type:u,nonce:um_scripts.nonce},success:function(e){var a=wp.template("um-"+u+"-mini");t.find(".um-followers-widget-wrapper").append(a(e)),t.addClass("um-is-loaded"),o.remove()},error:function(e){console.log(e),t.addClass("um-is-loaded")}})})),0<jQuery(".um-followers-widget").length&&jQuery(".um-followers-widget").each((function(){var e=jQuery(this),o=e.data("type"),t=e.data("max"),u=e.data("user_id");wp.ajax.send("um_followers_get_users",{data:{user_id:u,max:t,type:o,nonce:um_scripts.nonce},success:function(t){var u=wp.template("um-"+o+"-mini");e.find(".um-followers-widget-wrapper").append(u(t)),e.addClass("um-is-loaded")},error:function(o){console.log(o),e.addClass("um-is-loaded")}})}))}));