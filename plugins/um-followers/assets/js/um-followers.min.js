var um_followers_ajax=!1;jQuery(document).ready(function(){function u(e,o){var a="object"==typeof o?jQuery(o.currentTarget).closest("div.um-profile, div.um-member"):jQuery("div.um-profile"),u=a.find(".um-cover[data-user_id], .um-profile-photo[data-user_id], [data-user_id]").first().data("user_id");jQuery.each(e,function(e,o){u===o.user_id&&("undefined"!==o.followers&&a.find("span.um-ajax-count-followers").text(o.followers),"undefined"!==o.following&&a.find("span.um-ajax-count-following").text(o.following))})}jQuery(document.body).on("mouseenter",".um-unfollow-btn",function(){jQuery(this).hasClass("um_followers_ajax")||(jQuery(this).addClass("um-unfollow-btn2"),jQuery(this).html(jQuery(this).attr("data-unfollow")))}),jQuery(document.body).on("mouseleave",".um-unfollow-btn2",function(){jQuery(this).hasClass("um_followers_ajax")||(jQuery(this).removeClass("um-unfollow-btn2"),jQuery(this).html(jQuery(this).attr("data-following")))}),jQuery(document.body).on("click",".um-follow-btn",function(o){if(o.preventDefault(),!0===um_followers_ajax)return!1;um_followers_ajax=!0;var a=jQuery(this);a.parents(".um-members-wrapper").length;a.addClass("um_followers_ajax");var e=a.data("user_id");return wp.ajax.send("um_followers_follow",{data:{user_id:e,nonce:um_scripts.nonce},success:function(e){"object"==typeof e.stats&&u(e.stats,o),a.replaceWith(e.btn),um_followers_ajax=!1},error:function(e){console.log(e),um_followers_ajax=!1}}),!1}),jQuery(document.body).on("click",".um-unfollow-btn",function(o){if(o.preventDefault(),!0===um_followers_ajax)return!1;um_followers_ajax=!0;var a=jQuery(this);a.parents(".um-members-wrapper").length;a.addClass("um_followers_ajax");var e=a.data("user_id");return wp.ajax.send("um_followers_unfollow",{data:{user_id:e,nonce:um_scripts.nonce},success:function(e){"object"==typeof e.stats&&u(e.stats,o),a.replaceWith(e.btn),um_followers_ajax=!1},error:function(e){console.log(e),um_followers_ajax=!1}}),!1}),jQuery(document.body).on("click",".um-follow-show-all",function(e){var a=jQuery(this),u=a.parents(".um-followers-widget"),s=u.data("type"),o=u.data("max"),r=u.data("user_id");u.removeClass("um-is-loaded"),wp.ajax.send("um_followers_get_users",{data:{user_id:r,max:o,offset:o,type:s,nonce:um_scripts.nonce},success:function(e){var o=wp.template("um-"+s+"-mini");u.find(".um-followers-widget-wrapper").append(o(e)),u.addClass("um-is-loaded"),a.remove()},error:function(e){console.log(e),u.addClass("um-is-loaded")}})}),0<jQuery(".um-followers-widget").length&&jQuery(".um-followers-widget").each(function(){var a=jQuery(this),u=a.data("type"),e=a.data("max"),o=a.data("user_id");wp.ajax.send("um_followers_get_users",{data:{user_id:o,max:e,type:u,nonce:um_scripts.nonce},success:function(e){var o=wp.template("um-"+u+"-mini");a.find(".um-followers-widget-wrapper").append(o(e)),a.addClass("um-is-loaded")},error:function(e){console.log(e),a.addClass("um-is-loaded")}})})});